<?xml version="1.0" encoding="utf-8"?>

@using System
@using System.Linq
@using System.IO
@using System.Xml.Linq
@{
    var downloadLinks = new System.Collections.Generic.Dictionary<string, string> {
        { "AmazonFreeRTOS", "https://drive.google.com/uc?id=1JHgg9ruSHTakSkrrh0dzdpDsvwryhDqZ&export=download"},
        { "AWSCore", "https://drive.google.com/uc?id=123LkV-als2Rm9oMRon_DZM8FmDWgp0fj&export=download"},
        { "AWSIoT", "https://drive.google.com/uc?id=1jAuuMmrWufC0rAxzipx0_i3r2rFZulxk&export=download"},
        { "CBORCoding", "https://drive.google.com/uc?id=1ePfxs1lQt4W2501M0aeiPL_np5TZ&export=download"},
        { "Half", "https://drive.google.com/uc?id=1IVQy5Jjb2ShSbotyQBPuTLC0ojpzTRWm&export=download"},
    };

    var staticFrameworks = new string[] {
      @* "CardinalMobile" *@
    };
    var staticLibs = new string[] {
      @* "KountDataCollector" *@
    };
    var kind = staticFrameworks.Any(x => x == Model.NormalizedName) ? "Static" : "Framework";
}
<Project>
	<PropertyGroup>
		@Raw("<_" + Model.NormalizedName)AssemblyName>@(Model.NormalizedName).iOS, Version=@(Model.NuGetVersion), Culture=neutral, PublicKeyToken=null @Raw("</_" + Model.NormalizedName + "AssemblyName>")
		@Raw("<_" + Model.NormalizedName)ItemsFolder>@(Model.NormalizedName)-@(Model.NuGetVersion)@Raw("</_" + Model.NormalizedName + "ItemsFolder>")
		@Raw("<_" + Model.NormalizedName)SDKBaseFolder>$(XamarinBuildDownloadDir)$(_@(Model.NormalizedName)ItemsFolder)\@Raw("</_" + Model.NormalizedName + "SDKBaseFolder>")
	</PropertyGroup>
  <ItemGroup Condition="('$(OutputType)'!='Library' OR '$(IsAppExtension)'=='True')">
		<XamarinBuildDownload Include="$(_@(Model.NormalizedName)ItemsFolder)">      
			<Url>@(downloadLinks[Model.NormalizedName])</Url>
			<Kind>Zip</Kind>
		</XamarinBuildDownload>
    @if(staticLibs.Any(x => x == Model.NormalizedName)) {
    <NativeReference Condition=" $(Platform) == 'iPhoneSimulator' " Include="$(_@(Model.NormalizedName)SDKBaseFolder)@(Model.NormalizedName).xcframework/ios-arm64_x86_64-simulator/lib@(Model.NormalizedName).a">
			<Kind>Static</Kind>
			<SmartLink>True</SmartLink>
			<ForceLoad>True</ForceLoad>
		</NativeReference>
		<NativeReference Condition=" $(Platform) == 'iPhone' " Include="$(_@(Model.NormalizedName)SDKBaseFolder)@(Model.NormalizedName).xcframework/ios-arm64_armv7/lib@(Model.NormalizedName).a">
			<Kind>Static</Kind>
			<SmartLink>True</SmartLink>
			<ForceLoad>True</ForceLoad>
		</NativeReference>
    } else {
    <NativeReference Include="$(_@(Model.NormalizedName)SDKBaseFolder)@(Model.NormalizedName).xcframework">
      <Kind>@kind</Kind>
      <SmartLink>True</SmartLink>
      <ForceLoad>True</ForceLoad>
    </NativeReference>
    }
  </ItemGroup>
</Project>